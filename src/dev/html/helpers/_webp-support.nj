<script>
  function canUseWebP() {
    var elem = document.createElement('canvas');
    if (!!(elem.getContext && elem.getContext('2d'))) {
      return elem
        .toDataURL('image/webp')
        .indexOf('data:image/webp') == 0;
    }

    return false;
  }

  if (canUseWebP()) {
    document.documentElement.classList.add('webp');
  } else {
    document.documentElement.classList.add('no-webp');
  }
</script>